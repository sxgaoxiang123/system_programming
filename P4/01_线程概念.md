# 线程应用场景

有些情况需要在一个进程中同时执行多个控制流程，比如实现一个图形界面的下载软件，一方面需要和用户交互，等待和处理用户的鼠标键盘时间，另一方面又需要同时下载多个文件，等待和处理从多个网络主机发来的数据，这些任务都需要一个”等待-处理“循环



# 线程概念

线程（thread）：

- 是操作系统能否进行云端调度的最小单位
- 它被包含在进程中，是进程中的实际运作单位
- 一条线程指的是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务



# 多线程特点

由于同一进程的多个线程共享同一地址空间，因此Text Segment（代码段），Data Segment（数据段）都是共享的，如果定义一个函数，在各线程中都可以调用，如果定义一个全局变量，在各线程中都可以访问到，除此之外，各线程还共享以下进程资源和环境

## 线程间共享内容

1. 文件描述符表
2. 每种信号的处理方式
3. 当前工作目录
4. 用户id和组id
5. 堆空间

## 线程间不共享内容

1. 线程id
2. 上下文，包括各种寄存器的值、程序计数器和栈指针
3. 栈空间
4. errno变量
5. 信号屏蔽字
6. 调度优先级

Linux上线程函数位于libpthread共享库中，因此编译时要加上-l pthread选项


